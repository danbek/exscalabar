<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<script type="text/javascript" src="../js/populate.js"></script>

		<title>EXSCALABAR</title>
		<meta name="description" content="">
		<meta name="author" content="Matt">

		<link rel="stylesheet" href="../assets/bootstrap-3.2.0-dist/css/bootstrap.css" type="text/css" media="screen" title="no title" charset="utf-8"/>
		<link rel="stylesheet" href="../assets/sticky-footer.css" type="text/css" media="screen" title="no title" charset="utf-8"/>

        <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
        <script src="../assets/nvd3/nv.d3.min.js"></script>

    <link href="../assets/nvd3/nv.d3.min.css" rel="stylesheet" type="text/css">
		<meta name="viewport" content="width=device-width; initial-scale=1.0">

		<!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
		<link rel="shortcut icon" href="/favicon.ico">
		<link rel="apple-touch-icon" href="/apple-touch-icon.png">

		<style>
			.ctl-label {
				display: inline-block;
				width: 75px;
				/*margin-left: 15px;*/
				margin: 2px;
			}
			.ctl-input {
				width: 55px;
				margin: 2px;
			}

			.msg-footer {
				width: auto;
			}

            #chart svg {
                height: 350px;
            }
            
		</style>
	</head>

	<body onload = "pop_nav()">
		<div id = "xnav"></div>

		<div class="container-fluid">
			<div class="page-header">
				<h1>CRDS Control</h1>
			</div>
			<div class="row">
				<div class="col-md-3" role="main">
					<div class="row">
						<div class="panel panel-default">
							<div class="panel-heading">
								Laser Control
							</div>
							<div class="row">
								<div class="col-md-5">
									<div class="form-group" id="fcrd">
										<label class = "ctl-label" for="bluerate">f<sub>blue</sub> (Hz)</label>
										<input type="number" id="bluerate" class="span3 ctl-input" placeholder="2000" data-toggle="tooltip" data-placement="right" title="Blue laser repetition rate (in Hz)."/>
										<br />
										<label class = "ctl-label" for="redrate">f<sub>red</sub> (Hz)</label>
										<input type="number" id="redrate" class="ctl-input" placeholder="1000"/>
									</div>
								</div>
								<div class="col-md-5">
									<div class="form-group" id ="dccrd">
										<label class = "ctl-label" for="bluedc">DC<sub>blue</sub> (Hz)</label>
										<input type="number" id="bluedc" class="span3 ctl-input" placeholder="50"/>
										<br />
										<label class = "ctl-label" for="reddc">DC<sub>red</sub> (Hz)</label>
										<input type="number" id="reddc" class="ctl-input" placeholder="50"/>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="panel panel-default">
							<div class="panel-heading">
								Laser Gain
							</div>
							<p>
								Here is another panel below
							</p>
						</div>
					</div>
				</div>
				<div class="col-md-5">
                  <div id="chart" class='with-3d-shadow with-transitions'>
                    <svg></svg>
                  </div>
				</div>
				<div class="col-md-2" role="complementary" id ="snav"></div>
			</div>
		</div>
		
		
		<footer class="footer">
			<form class="form-inline" style:"width:100%;">
				<div class="form-group" class="msg-footer" style:"width:100%;">
					<label for="msg-out">System Message</label>
					<div class="input-group input-group-lg">
						<input class="form-control" type="text" id="msg-out" placeholder="This is a system message." disabled />
						<div class="input-group-btn">
							<button class="btn">
								Clear
							</button>
						</div>
					</div>
				</div>
			</form>
		</footer>
		<script src="../assets/jquery-2.1.1.js" type="text/javascript" charset="utf-8"></script>
		<script src="../assets/bootstrap-3.2.0-dist/js/bootstrap.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="../js/general.js"></script>		
        <script type="text/javascript">

    var chart;
    nv.addGraph(function() {
        chart = nv.models.lineWithFocusChart();

        chart.xAxis.tickFormat(d3.format(',f'));
        chart.x2Axis.tickFormat(d3.format(',f'));
        chart.yAxis.tickFormat(d3.format(',.2f'));
        chart.y2Axis.tickFormat(d3.format(',.2f'));

        d3.select('#chart svg')
            .datum(testData())
            .call(chart);

        nv.utils.windowResize(chart.update);

        return chart;
    });

    var data = [ {x: 0, y:1}, {x:10, y:-3}, {x:20, y:5}, {x:30, y:6}, {x:40, y:10}, {x:50, y:3} ];

    function testData() {
    return [ { values: data,
             key: "Test Data"
    }];
    }

   setInterval(function() {
      data.push( {x : data[data.length - 1].x + 10, y: data[data.length - 1].y + 4*Math.random() - 2.0} );
      chart.update();
    }, 5000); 

        </script>
	</body>
</html>
