!function(){angular.module("main",["ngRoute","ui.bootstrap","ui.bootstrap.contextMenu","dygraph","cirrus.ui.ibutton","cirrus.ui.inumeric","cirrus.ui.string"])}(),function(){angular.module("main").factory("net",function(){return localStorage.ip||(localStorage.ip="192.168.0.73"),localStorage.port||(localStorage.port="8001"),{ip:localStorage.ip,port:localStorage.port,getNetworkParams:function(){return{ip:this.ip,port:this._port}},setNetworkParams:function(e,t){this._ip=e,this.port=t,localStorage.ip=e,localStorage.port=t},setIP:function(e){this.ip=e,localStorage.ip=e},setPort:function(e){this.port=e,localStorage.port=e},address:function(){return"http://"+this.ip+":"+this.port+"/xService/"}}})}(),function(){function e(e,t,a,n,l){this.p=e,this.i=t,this.d=a,this.sp=n,this.en=l}function t(e,t){var a=e,n=t;this.net=n,this.fred=1e3,this.dcred=50,this.fblue=2e3,this.dcblue=50,this.kred=1,this.kblue=1,this.kpmt=[0,0,0,0,0],this.eblue=!0,this.ered=!0,this.setLaserRate=function(e,t){var l="CRDS_CMD/fblue?Rate="+t;e&&(l="CRDS_CMD/fred?Rate="+t),a.get(n.address()+l)},this.setEnable=function(e,t){}}function a(e,t){var a=e,n=t;this.spk={vrange:5,voffset:0,f0:1350,df:100,pos:!0,auto:!1,period:360,length:30},this.las={vr:[5,5,5,5,5],voffset:[1,2,3,4,5],f0:[1351,1352,1353,1354,1355],modulation:[!1,!1,!1,!1,!1],enable:[!1,!1,!1,!1,!1]},this.las.setf0=function(e){this.f0=e,a.get(n.address()+"PAS_CMD/UpdateFr?f0="+e.join(","))},this.las.setVr=function(e){this.las.vr=e,this.http.get(this.net.address()+"PAS_CMD/UpdateVrange?Vrange="+e.join(","))},this.las.setVo=function(e){this.las.vr=vr,this.http.get(this.net.address()+"PAS_CMD/UpdateVoffset?Voffset="+e.join(","))},this.las.updateMod=function(e){this.moduldation=e;var t=[];for(i=0;i<e.length;i++)t.push(e?1:0)},this.las.updateEnable=function(e){this.enable=e},this.spk.updateCtl=function(e){var t=e.pos?1:0;a.get(n.address()+"PAS_CMD/SpkSw?SpkSw="+t),a.get(n.address()+"PAS_CMD/Spk?df="+this.df+"&f0="+this.f0),a.get(n.address()+"PAS_CMD/UpdateSpkVparams?Voffset="+this.voffset+"&Vrange="+this.vrange)},this.spk.updateCycle=function(e,t,l){this.auto=e,this.length=l,this.period=t;var i=e?1:0;a.get(n.address()+"PAS_CMD/UpdateSpkCycle?Length="+l+"&Period="+t+"&Cycle="+i)}}function n(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}angular.module("main").factory("cvt",["$http","net","$rootScope",function(l,i,s){var r={save:!0,ozone:!1,filter_pos:!0,first_call:1,fctl:[],power:{TEC:!1,Laser:!1,Pump:!1,O3Gen:!1,Denuder:!1}};return r.humidifier={high:new e(.75,1,0,90,!1),med:new e(.75,1,0,80,!1)},r.pas=new a(l,i),r.crd=new t(l,i),r.filter_cycle={period:360,length:20,auto:!1},r.checkCvt=function(){promise=l.get(i.address()+"General/cvt?force="+r.first_call).then(function(e){if(first_Call=0,!n(e.data)){var t=e.data.crd,a=e.data.pas;r.crd.fred=t.red.f,r.crd.fblue=t.blue.f,r.crd.dcred=t.red.dc,r.crd.dcblue=t.blue.dc,r.crd.kpmt=t.kpmt,r.pas.las.f0=a.las.f0,r.pas.las.vrange=a.las.vrange,r.pas.las.voffset=a.las.voffset,r.pas.las.enable=a.las.enabled,r.pas.spk.f0=a.spk.fcenter,r.pas.spk.df=a.spk.df,r.pas.spk.vrange=a.spk.vrange,r.pas.spk.voffset=a.spk.voffset,r.pas.spk.auto=a.spk.cycle,r.pas.spk.length=a.spk.length,r.pas.spk.period=a.spk.period,r.pas.spk.pos=a.spk.enabled,r.filter_cycle.period=e.data.filter.period,r.filter_cycle.length=e.data.filter.length,r.filter_cycle.auto=e.data.filter.auto,r.filter_pos=e.data.general.filter_pos;for(var l=Number(e.data.general.power).toString(2);l.length<5;)l="0"+l;r.power.Pump="1"==l[0]?!0:!1,r.power.O3Gen="1"==l[1]?!0:!1,r.power.Denuder="1"==l[2]?!0:!1,r.power.Laser="1"==l[3]?!0:!1,r.power.TEC="1"==l[4]?!0:!1,s.$broadcast("cvtUpdated")}})},r.flows={},r.flows.updateSP=function(e,t){r.flows[e]=t,l.get(i.address()+"General/DevSP?SP="+t+"&DevID="+e)},r.updatePS=function(e){l.get(i.address()+"General/PowerSupply?val="+e)},r}])}(),function(){angular.module("main").config(["$routeProvider",function(e){e.when("/CRDS",{templateUrl:"views/crds.html"}).when("/PAS",{templateUrl:"views/pas.html"}).when("/O3",{templateUrl:"views/cals/ozone.html"}).when("/",{templateUrl:"views/main.html"}).when("/Flows",{templateUrl:"views/flows.html"}).when("/Temperature",{templateUrl:"views/temperature.html"}).when("/Humidifier",{templateUrl:"views/humidifier.html"}).when("/Common",{templateUrl:"views/common.html"}).when("/Config",{templateUrl:"views/config.html"})}])}(),function(){angular.module("main").controller("MainCtlr",["Data","$scope","$interval","cvt",function(e,t,a,n){a(function(){e.getData(),n.checkCvt()},1e3)}])}(),function(){function e(e){var t=new Date(1904,0,1);return t.setSeconds(e),t}function t(){this.ID="",this.Q=0,this.Q0=0,this.P=0,this.T=0,this.Qsp=0}function a(){this.f0=[],this.IA=[],this.Q=[],this.p=[],this.abs=[],this.micf=[],this.mict=[],this.pd=[]}function n(){this.tau=[],this.tau0=[],this.taucorr=[],this.tau0corr=[],this.ext=[],this.extcorr=[],this.stdevtau=[],this.etau=[],this.max=[],this.avg_rd=[],this.fit_rd=[]}function l(e,t,a){var n=(t.time[0],[t.tObj]),l=[t.tObj],i=[t.tObj],s=[t.tObj],r=[t.tObjj];a&&(t.pas.cell.f0.shift(),t.pas.cell.IA.shift(),t.pas.cell.Q.shift(),t.pas.cell.p.shift(),t.pas.cell.abs.shift());for(var o in e.PAS.CellData)n.push(e.PAS.CellData[o].derived.f0),l.push(e.PAS.CellData[o].derived.IA),i.push(e.PAS.CellData[o].derived.Q),s.push(e.PAS.CellData[o].derived.noiseLim),r.push(e.PAS.CellData[o].derived.ext);t.pas.cell.f0.unshift(n),t.pas.cell.IA.unshift(l),t.pas.cell.Q.unshift(i),t.pas.cell.p.unshift(s),t.pas.cell.abs.unshift(r),t.pas.drive=e.PAS.Drive,t.pas.cell.micf=[],t.pas.cell.mict=[],t.pas.cell.pd=[];var c=[],u=[],d=[];for(k=0;k<e.PAS.CellData[0].MicFreq.Y.length;k++){for(u=[k],d=[k],c=[k],j=0;j<e.pas.CellData.length;j++)u.push(e.PAS.CellData[j].MicFreq.Y[j]),d.push(e.PAS.CellData[j].MicTime.Y[j]),c.push(e.PAS.CellData[o].PhotoDiode.Y[j]);t.pas.cell.micf.push(u),t.pas.cell.mict.push(d),t.pas.cell.pd.push(c)}return t}function s(e,t,a){var n=[t.tObj],l=[t.tObj],i=[t.tObj],s=[t.tObj],r=[t.tObj],o=[t.tObj],c=[t.tObj],u=[t.tObj],d=[t.tObj];a&&(t.crd.cell.tau.shift(),t.crd.cell.tau0.shift(),t.crd.cell.taucorr.shift(),t.crd.cell.tau0corr.shift(),t.crd.cell.ext.shift(),t.crd.cell.extcorr.shift(),t.crd.cell.stdevtau.shift(),t.crd.cell.etau.shift(),t.crd.cell.max.shift());for(var p in e.CellData)n.push(e.CellData[p].extParam.Tau),l.push(e.CellData[p].extParam.Tau0),r.push(e.CellData[p].extParam.Tau0cor),s.push(e.CellData[p].extParam.taucorr),o.push(e.CellData[p].extParam.ext),c.push(e.CellData[p].extParam.extCorr),i.push(e.CellData[p].extParam.stdevTau),u.push(e.CellData[p].extParam.eTau),d.push(e.CellData[p].extParam.max);for(t.crd.cell.avg_rd=[],k=0;k<e.CellData[0].Ringdowns[0].length;k++){var f=[k];for(j=0;j<e.CellData.length;j++)f.push(e.CellData[j].Ringdowns[0][k]);t.crd.cell.avg_rd.push(f)}return t.crd.cell.tau.unshift(n),t.crd.cell.tau0.unshift(l),t.crd.cell.tau0corr.unshift(r),t.crd.cell.taucorr.unshift(s),t.crd.cell.extcorr.unshift(c),t.crd.cell.ext.unshift(o),t.crd.cell.stdevtau.unshift(i),t.crd.cell.etau.unshift(u),t.crd.cell.max.push(d),t}angular.module("main").factory("Data",["$rootScope","$http","$log","net","cvt",function(r,o,c,u,d){var p=["TestAlicat"],f=["pDryBlue"],h=["vDryRed","vDryBlue"],v={cTime:null,tObj:new Date,save:!0,o3cal:!1,Cabin:!1,time:[],msg:[]},m=300,g=!1;v.pas={},v.pas.cell=new a,v.pas.drive=!0,v.filter={state:!0,tremain:0},v.popMsgQueue=function(){var e=v.msg.slice();return v.msg=[],e},v.flowData=[new t],v.crd={},v.crd.cell=new n;var C=!1;return v.getData=function(){C||(C=!0,promise=o.get(u.address()+"General/Data").then(function(t){for(i=0;i<p.length;i++)p[i]in t.data&&(v[p[i]]=t.data[p[i]]);v.filter.state=t.data.Filter;var a=t.data.fcycle.tt-t.data.fcycle.te;for(v.filter.tremain=a>0?a:0,i=0;i<f.length;i++)f[i]in t.data&&(v[f[i]]=t.data[f[i]]);for(i=0;i<h.length;i++)h[i]in t.data&&(v[h[i]]=t.data[h[i]]);v.time.length-1>=m&&(v.time.pop(),g=!0),v.tObj=e(Number(t.data.Time));var n=v.tObj.getTime();v.time.unshift(n),v=l(t.data,v,g),v=s(t.data,v,g),v.Cabin=t.data.Cabin,r.$broadcast("dataAvailable"),t.data.Msg.length>0&&(v.msg.length>0?v.msg.concat(t.data.Msg):v.msg=t.data.Msg.slice(),r.$broadcast("msgAvailable"),C=!1)},function(e){r.$broadcast("dataNotAvailable")})["finally"](function(){C=!1}))},v}])}(),function(){function e(){return{restrict:"E",scope:{},templateUrl:"app/Messages/msg.html"}}angular.module("main").directive("msg",e)}(),function(){angular.module("main").controller("msgCtlr",["Data","$scope",function(e,t){t.msgs=[],t.error_code=[],t.num_codes=[0,0,0],t.$on("msgAvailable",function(){var a=e.popMsgQueue();for(i=0;i<a.length;i++)t.msgs.push(a[i]),a[i].search("ERROR")>0?(t.error_code.push(2),t.num_codes[2]+=1):a[i].search("WARNING")>0?(t.error_code.push(1),t.num_codes[1]+=1):(t.error_code.push(0),t.num_codes[0]+=1);t.clrMsgs=function(){t.num_codes=[0,0,0],t.msgs=[]}})}])}(),function(){angular.module("main").controller("Sidebar",["$scope","$http","Data","net","cvt",function(e,t,a,n,l){e.save=1,e.filter=a.filter.state,e.time="Not connected",e.connected=!1,e.o3On=!1,e.cabin=!1,e.pumpBlocked=!1,e.impBlocked=!1,e.interlock=!1,e.time="Not Connected",e.connected=!1,e.$on("dataAvailable",function(){e.filter=a.filter.state,e.cabin=a.Cabin,e.connected=!0}),e.$on("cvtUpdated",function(){}),e.$on("dataNotAvailable",function(){e.connected=!1}),e.saveData=function(){e.save=!e.save;var a=e.save?1:0;t.get(n.address()+"General/Save?save="+a.toString())},e.setFilter=function(){e.filter=!e.filter;var a=e.filter?1:0;t.get(n.address()+"General/UpdateFilter?State="+a)},e.setCabin=function(){e.cabin=!e.cabin;var a=e.cabin?1:0;t.get(n.address()+"General/Cabin?Cabin="+a)},e.stop=function(){t.get(n.address()+"General/Stop")}}])}(),function(){angular.module("main").controller("mrAlicatConfigCtlr",["$scope",function(e){function t(e,t){this.address=e,this.id=t}e.entry=new t("A","default"),e.devices=[],e.addDevice=function(){e.devices.push(new t(e.entry.address,e.entry.id))},e.rmDevice=function(){}}])}(),function(){angular.module("main").controller("footerCtlr",["$scope","Data",function(e,t){e.filter=!0,e.time="Not connected",e.connected=!1,e.o3On=!1,e.cabin=!1,e.pumpBlocked=!1,e.impBlocked=!1,e.interlock=!1,e.num_codes=[0,0,0],e.time="Not Connected",e.$on("dataAvailable",function(){e.time=t.tObj.toLocaleTimeString("en-US",{hour12:!1}),e.filter=t.filter,e.cabin=t.Cabin,e.connected=!0}),e.$on("msgAvailable",function(){var a=t.popMsgQueue();for(i=0;i<a.length;i++)a[i].search("ERROR")>0?e.num_codes[2]+=1:a[i].search("WARNING")>0?e.num_codes[1]+=1:e.num_codes[0]+=1}),e.$on("dataNotAvailable",function(){e.connected=!1})}])}(),function(){angular.module("main").controller("power",["$scope","cvt",function(e,t){e.power=t.power,t.first_call=1,e.toggle=function(a){e.power[a]=!e.power[a];var n=0,l=0,i=0;for(var s in e.power)e.power.hasOwnProperty(s)&&(i=e.power[s]?1:0,l+=Math.pow(2,n)*i,n+=1);t.updatePS(l)}}])}(),function(){angular.module("main").controller("mrConfigCtlr",["$scope","$http","Data","net","cvt",function(e,t,a,n,l){l.first_call=1,e.network={ip:n.ip,port:n.port},e.changeIP=function(){n.setIP(e.network.ip)},e.changePort=function(){n.setPort(e.network.port)},e.filter={pos:!0,auto:!0,len:30,per:360,updatePos:function(){this.pos=!this.pos,console.log("updating filter position")},updateAuto:function(){auto=!auto,console.log("update filter auto")}},e.file={folder:"exscalabar\\data",main:"u:\\",mirror:"v:\\",prefix:"ex_",ext:".txt",max:10,save:!0}}])}(),function(){angular.module("main").controller("filter",["$scope","net","$http","cvt","Data",function(e,t,a,n,l){e.cycle={auto:n.filter_cycle.auto,period:n.filter_cycle.period,length:n.filter_cycle.length},e.position=n.filter_pos,e.tremain=l.filter.tremain,e.state=l.filter.state,e.updateCycle=function(){var l=e.cycle.auto?1:0;a.get(t.address()+"General/FilterCycle?Length="+e.cycle.length+"&Period="+e.cycle.period+"&auto="+l),n.filter_cycle={period:e.cycle.period,length:e.cycle.length,auto:e.cycle.auto}},e.updateFilter=function(){var l=e.position?1:0;a.get(t.address()+"General/UpdateFilter?State="+l),n.pos=e.position},e.updateAuto=function(){e.cycle.auto=!e.cycle.auto,e.updateCycle()},e.$on("dataAvailable",function(){e.tremain=l.filter.tremain,e.state=l.filter.state}),e.$on("cvtUpdated",function(){e.cycle={auto:n.filter_cycle.auto,period:n.filter_cycle.period,length:n.filter_cycle.length}})}])}(),function(){function e(e){var t={tauData:[],rdFit:[],rdAvg:[]};for(i=1;i<e.cell.tau[0].length;i++)t.tauData.push([e.cell.tau[0][i],e.cell.tau0[0][i],e.cell.taucorr[0][i],e.cell.tau0corr[0][i],e.cell.ext[0][i]]);return t.rdAvg=e.cell.avg_rd,t}angular.module("main").controller("crd",["$scope","cvt","Data",function(t,a,n){a.firstcall=1;var l=function(e,t,a,n,l){this.rate=e,this.DC=t,this.k=a,this.en=n,this.id=l};t.setRate=function(e,t){a.crd.setLaserRate(e,t)},t.laser_ctl=[new l(a.crd.fblue,a.crd.dcblue,a.crd.kblue,a.crd.eblue,"Blue Laser"),new l(a.crd.fred,a.crd.dcred,a.crd.kred,a.crd.ered,"Red Laser")],t.pmt=a.crd.kpmt,t.purge={pos:!1,flow:.16,setValve:function(){t.purge.pos=!t.purge.pos},setFlow:function(){}},t.data=n.crd,t.setEnable=function(e){t.laser_ctl[e].en=!t.laser_ctl[e].en;var n=t.laser_ctl[e].en;switch(e){case 0:a.crd.eblue=n;break;case 1:a.crd.ered=n}},t.ringdownAvg=[[0,0/0,0/0,0/0,0/0,0/0]],t.pData=[[0,0/0,0/0,0/0,0/0,0/0]],t.options={title:"Ringdown Data",ylabel:"Ringdown Magnitude (au)",labels:["t","Cell 1","Cell 2","Cell 3","Cell 4","Cell 5"],legend:"always"},t.optPData={title:"CRD Data",ylabel:"data",labels:["t","Cell 1","Cell 2","Cell 3","Cell 4","Cell 5"],legend:"always"},t.pDataCMOptions=[["tau",function(){t.optPData.ylabel="tau (us)"}],["tau'",function(){t.optPData.ylabel="tau' (us)"}],["stdev",function(){}]],t.$on("dataAvailable",function(){t.data=n.crd;var a=e(n.crd);t.ringdownAvg=a.rdAvg,t.pData=n.crd.cell.max})}])}(),function(){angular.module("main").controller("pas",["$scope","net","$http","cvt","Data","$log",function(e,t,a,n,l,i){e.data=l.pas;var s=0;n.first_call=1,e.pData=[[0,0/0,0/0,0/0,0/0,0/0]],e.options={title:"PAS Data",ylabel:"IA",labels:["t","Cell 1","Cell 2","Cell 3","Cell 4","Cell 5"],legend:"always"},e.pDataCMOptions=[["IA",function(){e.options.ylabel="IA",s=0}],["f0",function(){e.options.ylabel="f0 (Hz)",s=1}],["Q",function(){e.options.ylabel="Q",s=2}]],e.$on("dataAvailable",function(){switch(e.data=l.pas,s){case 0:e.pData=e.data.cell.IA;break;case 1:e.pData=e.data.cell.f0;break;case 2:e.pData=e.data.cell.Q;break;case 3:e.pData=e.data.cell.p;break;case 4:e.pData=e.data.cell.abs}})}])}(),function(){angular.module("main").controller("pasSpk",["$scope","cvt","Data",function(e,t,a){var n=10,l=5;e.speaker=t.pas.spk;var i={high:3e3,low:500};e.$on("cvtUpdated",function(){e.speaker=t.pas.spk}),e.setPos=function(){e.speaker.pos=!e.speaker.pos,t.pas.spk.updateCtl(e.speaker)},e.updateSpkV=function(){e.speaker.vrange>n?e.speaker.vrange=n:e.speaker.vrange<0&&(e.speaker.vrange=0),e.speaker.voffset>l?e.speaker.voffset=l:e.speaker.voffset<0&&(e.speaker.voffset=0),t.pas.spk.updateCtl(e.speaker)},e.updateSpkF=function(){e.speaker.f0>i.high?e.speaker.f0=i.high:e.speaker.f0<i.low&&(e.speaker.f0=i.low),t.pas.spk.updateCtl(e.speaker)},e.updateCycle=function(){t.pas.spk.updateCycle(e.speaker.auto,e.speaker.period,e.speaker.length)},e.updateAuto=function(){e.speaker.auto=!e.speaker.auto,e.updateCycle()}}])}(),function(){function e(e,t,a,n,l){this.Vrange=e,this.Voffset=t,this.f0=a,this.modulation=n,this.lasEn=!1}angular.module("main").controller("pasLas",["$scope","cvt","Data",function(t,a,n){for(t.lasCtl=[],i=0;i<a.pas.las.vr.length;i++)t.lasCtl.push(new e(a.pas.las.vr[i],a.pas.las.voffset[i],a.pas.las.f0[i],a.pas.las.modulation[i],a.pas.las.enable[i]));t.$on("dataAvailable",function(){if(n.pas.drive)for(i=0;i<n.pas.cell.length;i++)t.lasCtl[i].f0=t.data.cell[i].f0[0].y}),t.$on("cvtUpdated",function(){for(i=0;i<a.pas.las.vr.length;i++)t.lasCtl[i].vr=a.pas.las.vr[i],t.lasCtl[i].vo=a.pas.las.voffset[i],t.lasCtl[i].f0=a.pas.las.f0[i],t.lasCtl[i].mod=a.pas.las.modulation[i],t.lasCtl[i].en=a.pas.las.enable[i]}),t.updateMod=function(e){t.lasCtl[e].modulation=!t.lasCtl[e].modulation;var n=[];for(j=0;j<t.lasCtl.length;j++)n.push(t.lasCtl[j].modulation);a.pas.las.updateMod(n)},t.updateVr=function(){var e=[];for(i=0;i<t.lasCtl.length;i++)e.push(t.lasCtl[i].Vrange);a.pas.las.setVr(e)},t.updateVo=function(){var e=[];for(i=0;i<t.lasCtl.length;i++)e.push(t.lasCtl[i].Voffset);a.pas.las.setVo(e)},t.updatef0=function(){var e=[];for(i=0;i<t.lasCtl.length;i++)e.push(t.lasCtl[i].f0);a.pas.las.setf0(e)},t.updateEnable=function(e){t.lasCtl[e].lasEn=!t.lasCtl[e].lasEn;var n=[];for(e=0;e<t.lasCtl.length;e++)n.push(t.lasCtl[e].lasEn);a.pas.las.updateEnable(n)}}])}(),function(){angular.module("main").controller("flowCtlr",["$scope","Data","cvt",function(e,t,a){function n(){this.P=0,this.T=0,this.Q=0,this.Q0=0,this.Q=0}function l(t,a,l,s,r){this.label=t,this.ID=a,this.type=l,this.isController=s,this.data=new n,this.sp=r,this.index=-1,s&&(e.setpoints.push(r),i+=1,this.index=i)}var i=-1;a.first_call=1,e.setpoints=[],e.Devices=[new l("Dry Red","TestAlicat","mflow",!0,0),new l("Dry Blue","dryBlue","mflow",!1,0),new l("Denuded Blue","deBlue","mflow",!1,0),new l("Denuded Red","deRed","mflow",!0,0),new l("PAS Green","pGreen","mflow",!1,0),new l("CRD High Humidified","crdHighHum","mflow",!1,0),new l("CRD Low Humidified","crdLowHum","mflow",!1,0),new l("Mirror Purge Flow","crdMirror","mflow",!1,0),new l("Pressure Controller","pCtl","pressure",!1,0),new l("O3 Bypass","o3Bypass","mflow",!0,0)],e.updateSP=function(e){a.flows.updateSP(e.ID,e.sp)},e.$on("dataAvailable",function(){for(j=0;j<e.Devices.length;j++)e.Devices[j].ID in t&&(e.Devices[j].P=t[e.Devices[j].ID].P,e.Devices[j].T=t[e.Devices[j].ID].T,e.Devices[j].Q=t[e.Devices[j].ID].Q,e.Devices[j].Q0=t[e.Devices[j].ID].Q0,e.Devices[j].Qsp=t[e.Devices[j].ID].Qsp)})}])}(),function(){angular.module("main").controller("humidifier",["$scope","cvt","Data",function(e,t,a){t.first_call=1,e.high=t.humidifier.high,e.med=t.humidifier.med,e.updateMedEn=function(){e.med.en=!e.med.en,t.humidifier.med=e.med.en},e.updateHighEn=function(){e.high.en=!e.high.en,t.humidifier.high=e.high.en}}])}(),function(){angular.module("main").controller("startCal",["$scope","$http","net","cvt",function(e,t,a,n){e.cal=n.ozone,e.startCalibration=function(){e.cal=!e.cal;var l=e.cal?1:0;n.ozone=e.cal,t.get(a.address()+"General/ozone?start="+l.toString())}}])}(),function(){angular.module("main").controller("O3Table",["$scope","tableService",function(e,t){e.table_vals=[{id:"Wait",step:"Wait",descr:"Set a wait time in the ozone cal in seconds"},{id:"Filter",step:"Filter",descr:"Boolean that sets the filter state."},{id:"Speaker",step:"Speaker",descr:"Boolean that sets the speaker state."},{id:"O2-Valve",step:"O2 Valve",descr:"Boolean that sets the O2 valve position."},{id:"O3-Valve",step:"O3 Valve",descr:"Boolean that sets the O3 valve state."},{id:"O3-Generator",step:"O3 Generator",descr:"Boolean that sets the O3 generator state."},{id:"QO2",step:"QO2",descr:"Numeric to set the oxygen flow rate"}],e.clickRow=function(e){t.setTab(e.id.toString())}}])}(),function(){angular.module("main").factory("tableService",["$rootScope",function(e){var t={curTab:"",getTab:function(){return this.curTab},setTab:function(t){this.curTab=t,e.$broadcast("handleBroadcast")}};return t}])}(),function(){angular.module("main").factory("SaveData",function(){var e={data:[],setData:function(e){this.data=e},getData:function(){return this.data}};return e})}(),function(){angular.module("main").controller("Save",["$scope","SaveData","$http","net",function(e,t,a,n){e.cal_file="default",e.save=function(){var l='<?xml version="1.0" encoding="utf-8"?>\r\n<OZONE>\r\n';t.getData().forEach(function(e){l+="	<"+e.id+">"+e.val+"</"+e.id+">\r\n"}),l+="</OZONE>",a({method:"POST",url:n.address()+"Calibration/saveCalFile?file_name="+e.cal_file+".xml",data:l,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])}(),function(){angular.module("main").controller("InputTable",["$scope","tableService","SaveData",function(e,t,a){e.data=[],e.$on("handleBroadcast",function(){var n=t.getTab(),l="";switch(n){case"O3-Valve":case"O2-Valve":case"O3-Generator":case"Filter":l="FALSE";break;case"Wait":case"Speaker":l="20";break;case"QO2":l="100"}e.data.push({id:n,val:l}),a.setData(e.data)})}])}(),function(){function e(){return{restrict:"E",scope:{},templateUrl:"app/sidebar/side.html"}}angular.module("main").directive("sidebar",e)}(),function(){angular.module("main").factory("navservice",["$http","net","cvt",function(e,t,a){var n={};return n.stop=function(){e.get(t.address()+"General/Stop")},n.save=function(a){var n=a?1:0;e.get(t.address()+"General/Save?save="+n.toString())},n}])}(),function(){function e(){return{restrict:"E",scope:{},templateUrl:"app/navigation/navi.html"}}angular.module("main").directive("navi",e)}(),function(){angular.module("main").controller("navctlr",["$scope","navservice",function(e,t){e.save=!0,e.updateSave=function(){e.save=!e.save,t.save(e.save)},e.stop=function(){t.stop()}}])}();